title: VimRecord
date: 2022-07-15 22:30:09
categories:
- [Daily-Record,Technology]
tags:
- Linux
- Vim

toc: true
---

Vim键位记录
<!--more-->


### 常用操作
| 键位                                 | 操作                                                             | 键位            | 操作                                               |
| ------------------------------------ | ---------------------------------------------------------------- | --------------- | -------------------------------------------------- |
| __移动__                                 |                                                                  | __光标位置__        |
| hjkl                                 | 左下右上                                                         | CTRL-G          | 显示文档名以及光标所在行列                         |
| 数字+                                | 光标移动至第n个词的词首                                          | __文档位置__        |
| e                                    | 光标移至下一词词尾                                               | G               | 文档结尾                                           |
| 数字+e                               | 光标移动至第n个词的词尾                                          | gg              | 文档开头                                           |
| __删除__                                 |                                                                  | 行数+G          | 跳转指定行数                                       |
| 当前光标字符                         | x	（普通模式）                                                   | __搜索__            |
| d-                                   | （普通模式）                                                     | /+字符          | __搜索单词__                                           |
| w                                    | 删除光标所在的单词（不保留词后空格）                             | /+字符+$        | 查找以 字符 为行尾的行                             |
| e                                    | 删除光标所在的单词（保留词后空格）                               | /+字符+n        | 向同一方向重复上次的查找指令                       |
| $                                    | 删除光标及其后所有字符                                           | /+字符+N        | 返回上一个搜索结果                                 |
| d+数字＋w                            | 删除光标后n个单词（不保留词后空格）                              | ?+字符          | 从光标所在为主向后查找字符串                       |
| dd                                   | 删除行（数字+dd 删除n行）                                        | ctrl + o        | __反向搜索 __                                          |
| G                                    | 删除光标所在行一直到文件末尾的所有内容                           | __匹配__            |
| D                                    | 删除光标位置到行尾的内容                                         | %+),], or }     | 自动跳转到匹配的另一部分                           |
| :a1,a2d                              | 函数从 a1 行到 a2 行的文本内容                                   | 执行命令        |
| __撤销删除__                             |                                                                  | :!dir           | 列出当前目录下内容                                 |
| u                                    |                                                                  | :!ls            |
| U                                    | 回退至初始状态                                                   | __插入 __           |
| ctrl+R                               |                                                                  | a               | 当前光标前                                         |
| __复制__                                 |                                                                  | A               | 当前光标后                                         |
| p                                    | 复制dd删除的列（删除后转移到寄存器）                             | o               | 当前光标行的下一行                                 |
| __修改__                                 |                                                                  | O               | 当前光标行的上一行                                 |
| r                                    | 修改光标所在字符                                                 | i               | 光标所在行最前                                     |
| ce                                   | 删除光标所在字符后所有字符，进入insert模式（单个单词，保留空格） | I               | 光标所在行最后                                     |
| __文件__                                 |                                                                  | __文本替换__        |
| v进入visual模式选取文本              | 截取部分文档另存为文件                                           | R               | 进入insert模式，接下来所有输入都将直接替换原有字符 |
| :+w +文件名                          |                                                                  | `:s/a1/a2/g`      | 将当前光标所在行中的所有 a1 用 a2 替换             |
| :r +目录下文件                       | 将该文件内容输入到光标前                                         | :n1,n2s/a1/a2/g | 将文件中 n1 到 n2 行中所有 a1 都用 a2 替换         |
| :!del FILENAME                       | 删除文件                                                         | :g/a1/a2/g      | 将文件中所有的 a1 都用 a2 替换                     |
| :!rm FILENAME                        |
| __文本复制__                             |
| v进入visual模式选取文本+y+指定位置+p | 在光标后添加一个空格并复制选中文本                               |
	
### 命令行指令
命令行
| __命令__                   | __操作__                                              |
| ---------------------- | ------------------------------------------------- |
| vim filename           | 打开或新建一个文件，并将光标置于第一行的首部      |
| vim -r filename        | 恢复上次 vim 打开时崩溃的文件                     |
| vim -R filename        | 把指定的文件以只读方式放入 Vim 编辑器中           |
| vim + filename         | 打开文件，并将光标置于最后一行的首部              |
| vi +n filename         | 打开文件，并将光标置于第 n 行的首部               |
| vi +/pattern filename  | 打幵文件，并将光标置于第一个与 pattern 匹配的位置 |
| vi -c command filename | 在对文件进行编辑前，先执行指定的命令              |


vim 界面内
| 格式                 | 功能                                                                                                                        |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------- |
| :!命令               | 直接运行一个 Linux 命令，运行完毕之后，即可返回到 Vim 中。                                                                  |
| :w!命令              | 将 Vim 中所有的文本内容作为指定命令的输入。但命令的执行结果不会写入到当前文件中。强制保存文本                               |
| :r!命令              | 将命令执行的结果写入到当前 Vim 中，例如 :!ls 表示将 ls 的执行结果输入到 Vim 中。                                            |
| :nr!命令             | 其中 n 为数字，表示将命令的执行结果写入到 Vim 第 n 行的位置。例如，:3r!date 表示将 date 命令的执行结果写入到第 3 行文本处。 |
| :n,m!命令            | 其中 n 表示起始行号，m为结束行号，功能是将 Vim 中指定的部分文本作为某个命令的输入，同时将命令的输出也插入到当前指定的位置。 |
| :n,m w!命令          | 其中 n 表示起始行号，m为结束行号，其功能是 Vim 中指定的部分文本作为某个命令的输入，但命令的执行结果不会写入到文件中。       |
| !!date               | 向 Vim 中插入当前时间。                                                                                                     |
| :wq                  | 保存并退出 Vim 编辑器                                                                                                       |
| :wq!                 | 保存并强制退出 Vim 编辑器                                                                                                   |
| :q                   | 不保存就退出 Vim 编辑器                                                                                                     |
| :q!                  | 不保存，且强制退出 Vim 编辑器                                                                                               |
| :w                   | 保存但是不退出 Vim 编辑器                                                                                                   |
| :w filename          | 另存到 filename 文件                                                                                                        |
| x！                  | 保存文本，并退出 Vim 编辑器，更通用的一个 vim 命令                                                                          |
| ZZ                   | 直接退出 Vim 编辑器                                                                                                         |
| 保存对只读文件的修改 | :w !sudo tee %                                                                                                              |

> "w!" 和 "wq!" 等，通常用于对文件没有写权限的时候（显示 readonly），但如果是文件的所有者或者 root 用户，就可以强制执行

